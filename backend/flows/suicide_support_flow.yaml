id: suicide_support_flow
trigger_keywords:
  - suicide
  - suicidal
  - self-harm
  - hurting myself
  - ending my life
  - kill myself
steps:
  - id: start
    engine: basic
    bot: "I'm really sorry you're feeling this way. Please reach out to a mental health professional or someone you trust immediately for support."
    user_response_required: false
    set_context:
      isInFlow: true

    next_step_id: offer_help
  - id: offer_help
    engine: basic
    bot: "I want to make sure you're safe. If you'd like, I can provide resources or help you connect with someone who can assist you."
    user_response_required: true
    branches:
      - condition:
          engine: basic
          expected_user_keywords:
            - yes
            - sure
            - please
        next_step_id: provide_resources
      - condition:
          engine: basic
          expected_user_keywords:
            - no
            - not now
            - later
        next_step_id: offer_closing

  - id: provide_resources
    engine: basic
    bot: "Here are some resources that can help you in a crisis:\n\n- [National Suicide Prevention Lifeline](https://suicidepreventionlifeline.org)\n- Call 1-800-273-8255"
    user_response_required: false
    next_step_id: offer_closing

  - id: offer_closing
    engine: basic
    bot: "Please remember, you're not alone, and help is available. If you need support, don't hesitate to reach out."
    user_response_required: false
    next_step_id: end_flow

  - id: end_flow
    engine: basic
    bot: "Take care of yourself, and know that people care about you."
    user_response_required: false
